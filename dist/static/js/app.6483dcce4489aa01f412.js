webpackJsonp([1],{AexV:function(t,e){},Kk2W:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var l=a("VU/8")({name:"App"},n,!1,function(t){a("Kk2W")},null,null).exports,r=a("/ocq"),o=a("Xxa5"),s=a.n(o),c=a("exGp"),p=a.n(c),u=a("Milw"),d=a.n(u),f={name:"map-view",data:function(){return{strData:"",allData:[],allDataStr:"",restData:[],pointsList:[{x:"116.3912757",y:"39.906217",v:""}],dialogVisible:!1,doingIndex:0,circleMarkers:[],circlePoints:"",circleEditor:"",x:116.433322,y:39.900255,r:5e4}},created:function(){},mounted:function(){this.initAMap(),this.handleFileChange()},unmounted:function(){this.map.destroy()},computed:{restDataRe:function(){return this.restData.reduce(function(t,e,a){var i=Math.floor(a/7);return t[i]||(t[i]=[]),t[i].push(e),t},[])}},watch:{allData:{handler:function(t,e){this.pasterMap(),this.compare()},deep:!0},x:function(){this.drawCircle()},y:function(){this.drawCircle()},r:function(){this.drawCircle()}},methods:{initAMap:function(){var t=this;return p()(s.a.mark(function e(){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,e.next=3,d.a.load({key:"7e1b85237d72d57b3ec1d649ffa3f648",version:"2.0",plugins:["AMap.Scale"]}).then(function(e){var i=new e.TileLayer.RoadNet,n=new e.TileLayer.Satellite;t.map=new e.Map("container",{viewMode:"3D",zoom:11,center:[116.397428,39.90923],layers:[n,i]});var l=new e.TileLayer.WMS({url:"https://ahocevar.com/geoserver/wms",blend:!1,tileSize:512,params:{LAYERS:"topp:states",VERSION:"1.3.0"}});t.map.add(l),t.map.on("click",function(t){a.x=t.lnglat.getLng(),a.y=t.lnglat.getLat(),a.drawCircle()})}).catch(function(t){console.log(t)});case 3:case"end":return e.stop()}},e,t)}))()},drawCircle:function(){var t=this;t.circleEditor&&t.circleEditor.close(),this.map.remove(this.circlePoints);var e=new AMap.LngLat(this.x?this.x:116.397428,this.y?this.y:39.90923),a=this.r;this.circlePoints=new AMap.Circle({center:e,radius:a,borderWeight:0,strokeColor:"#FF33FF",strokeOpacity:1,strokeWeight:0,fillOpacity:.4,strokeStyle:"clip",strokeDasharray:[10,10],fillColor:"#1791fc",zIndex:50}),this.map.add(this.circlePoints),this.map.setFitView([this.circlePoints]),this.map.plugin(["AMap.CircleEditor"],function(){t.circleEditor=new AMap.CircleEditor(t.map,t.circlePoints,{resizePoint:{display:"none"}}),t.circleEditor.open()}),this.compare()},compare:function(){var t=this;this.restData=this.allData;var e=[this.x,this.y];this.pointsList.forEach(function(a){var i=[a.x,a.y];AMap.GeometryUtil.distance(e,i)<t.r&&(t.restData=t.restData.filter(function(t){return!a.v.split(",").some(function(e){return e==t})}))})},changeAllDataStr:function(){this.allData=this.allDataStr.split(",").filter(function(t){return t})},handleFileChange:function(){var t=this;document.getElementById("file-input").addEventListener("change",function(){var e=new FileReader;e.onload=function(){t.strData=e.result.replaceAll("\r\n",""),t.strData=t.strData.replaceAll(" ","&"),console.log(t.strData);var a=t.strData.split("/");t.allData=a[1].split("&"),t.allData=t.allData.filter(function(t){return t}),t.allDataStr=t.allData.join(","),t.restData=t.allData,t.pointsList=a[0].split(",").map(function(t){var e=t.split(":"),a=e[0].split("&");return{x:a[0],y:a[1],v:e[1]}}),t.pointsList.forEach(function(t){t.v=t.v?t.v.replaceAll("&",","):"-"})},e.readAsText(this.files[0])})},handleAdd:function(){this.pointsList.push({x:"116.3912757",y:"39.906217",v:""}),console.log(this.pointsList),this.pasterMap(),this.drawCircle(),this.compare()},handleEdit:function(t,e){this.dialogVisible=!0,this.doingIndex=e,this.drawCircle(),this.compare()},handleDel:function(t,e){this.pointsList.splice(e,1),this.pasterMap(),this.drawCircle(),this.compare()},pasterMap:function(){var t=this;this.circleMarkers.forEach(function(e){t.map.remove(e)}),this.pointsList.forEach(function(e){console.log(e.v,t.allData),e.v.split(",").forEach(function(e){-1==t.allData.indexOf(e)&&e&&t.allData.push(e)}),console.log("111",t.allData),t.allDataStr=t.allData.join(",")}),this.circleMarker=[];var e=this.pointsList.map(function(t){return new AMap.LngLat(t.x,t.y)});this.circleMarkers=[],e.forEach(function(e){t.circleMarkers.push(new AMap.CircleMarker({center:e,radius:5,strokeColor:"white",strokeWeight:2,strokeOpacity:.5,fillColor:"rgba(0,0,255,1)",fillOpacity:.5,zIndex:10,cursor:"pointer"}))}),this.circleMarkers.forEach(function(e){t.map.add(e)}),this.compare()},exportData:function(){var t=this;console.log(this.pointsList);var e="";this.pointsList.forEach(function(a,i){i+1<t.pointsList.length?e+=a.x+" "+a.y+":"+a.v.replaceAll(","," ")+",\n":e+=a.x+" "+a.y+":"+a.v.replaceAll(","," ")+"\n"}),e+="/\n",e+=this.allData.join(" "),e+="\n/剩余频率\n",e+=this.restData.join(" ");var a=new Blob([e],{type:"text/plain;charset=utf-8"});saveAs(a,"点位统计.txt")}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("div",{staticClass:"left"},[a("div",{attrs:{id:"container"}}),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-form",{attrs:{inline:""}},[a("el-form-item",{attrs:{label:"当前定位经度"}},[a("el-input",{model:{value:t.x,callback:function(e){t.x=e},expression:"x"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"当前定位纬度"}},[a("el-input",{model:{value:t.y,callback:function(e){t.y=e},expression:"y"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"当前定位半径"}},[a("el-input",{model:{value:t.r,callback:function(e){t.r=e},expression:"r"}})],1)],1),t._v(" "),a("span",[t._v("剩余可用频率：")]),t._v(" "),t._l(t.restDataRe,function(e,i){return a("div",{key:i},[t._v(t._s(e.join(",")))])})],2)]),t._v(" "),a("div",{staticClass:"right",staticStyle:{padding:"10px"}},[a("div",{staticClass:"topBtn"},[a("input",{staticStyle:{display:"block","margin-bottom":"10px"},attrs:{id:"file-input",type:"file"}}),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleAdd()}}},[t._v("添加点位")]),t._v(" "),a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{size:"mini"},on:{click:function(e){return t.exportData()}}},[t._v("导出")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"60px"},attrs:{data:t.pointsList}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{prop:"x",label:"经度",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{on:{change:t.pasterMap},model:{value:e.row.x,callback:function(a){t.$set(e.row,"x",a)},expression:"scope.row.x"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"y",label:"维度",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{on:{change:t.pasterMap},model:{value:e.row.y,callback:function(a){t.$set(e.row,"y",a)},expression:"scope.row.y"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"v",label:"频率"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{on:{change:t.pasterMap},model:{value:e.row.v,callback:function(a){t.$set(e.row,"v",a)},expression:"scope.row.v"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleDel(e.row,e.$index)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-form",[a("el-form-item",{attrs:{label:"全部频率"}},[a("el-input",{attrs:{type:"textarea",rows:4},on:{change:t.changeAllDataStr},model:{value:t.allDataStr,callback:function(e){t.allDataStr=e},expression:"allDataStr"}})],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改点位",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.pasterMap}},[a("el-form",[a("el-form-item",{attrs:{label:"经度"}},[a("el-input",{model:{value:t.pointsList[t.doingIndex].x,callback:function(e){t.$set(t.pointsList[t.doingIndex],"x",e)},expression:"pointsList[doingIndex].x"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"纬度"}},[a("el-input",{model:{value:t.pointsList[t.doingIndex].y,callback:function(e){t.$set(t.pointsList[t.doingIndex],"y",e)},expression:"pointsList[doingIndex].y"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"频率"}},[a("el-input",{model:{value:t.pointsList[t.doingIndex].v,callback:function(e){t.$set(t.pointsList[t.doingIndex],"v",e)},expression:"pointsList[doingIndex].v"}})],1)],1)],1)],1)},staticRenderFns:[]};var v=a("VU/8")(f,h,!1,function(t){a("AexV")},"data-v-0b8d7f77",null).exports;i.default.use(r.a);var m=new r.a({routes:[{path:"/",name:"main",component:v}]}),x=a("zL8q"),g=a.n(x);a("tvR6"),a("t4zo");i.default.use(g.a),i.default.config.productionTip=!1,new i.default({el:"#app",router:m,components:{App:l},template:"<App/>"})},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.6483dcce4489aa01f412.js.map